***************
*** 43,59 ****
    global $base_url;
    $adminimal_path = drupal_get_path('theme', 'adminimal_theme');
    $old_css_path = $adminimal_path . '/css/custom.css';
    $custom_css_path = 'public://adminimal-custom.css';
    $custom_css_dir = str_replace($base_url . '/', "", file_create_url($custom_css_path));
    $custom_css_url = file_create_url($custom_css_path);
  
    // Try to create the adminimal-custom.css file automatically.
-   if (!file_exists($custom_css_path)) {
  
      // Try to migrate from the old css.
      if (file_exists($old_css_path)) {
        file_unmanaged_copy($old_css_path, $custom_css_path, FILE_EXISTS_ERROR);
      }
      // Else create a new blank css file.
      else {
        file_unmanaged_save_data("", $custom_css_path, FILE_EXISTS_ERROR);
--- 43,71 ----
    global $base_url;
    $adminimal_path = drupal_get_path('theme', 'adminimal_theme');
    $old_css_path = $adminimal_path . '/css/custom.css';
+   $override_directory = theme_get_setting('custom_css_directory');
+   $override_file_path = $override_directory . '/adminimal-custom.css';
    $custom_css_path = 'public://adminimal-custom.css';
    $custom_css_dir = str_replace($base_url . '/', "", file_create_url($custom_css_path));
    $custom_css_url = file_create_url($custom_css_path);
  
+   $rebuild_file = theme_get_setting('custom_css_rebuild');
+ 
    // Try to create the adminimal-custom.css file automatically.
+   if (!file_exists($custom_css_path) || $rebuild_file ) {
+     $replace = FILE_EXISTS_ERROR;
+     if ($rebuild_file) {
+       $replace = FILE_EXISTS_REPLACE;
+     } 
  
      // Try to migrate from the old css.
      if (file_exists($old_css_path)) {
        file_unmanaged_copy($old_css_path, $custom_css_path, FILE_EXISTS_ERROR);
      }
+     // Check if theres something in override directory, copy it over
+     elseif (!empty($override_directory) && file_exists($override_file_path)){
+       file_unmanaged_copy($override_file_path, $custom_css_path, $replace);
+     }
      // Else create a new blank css file.
      else {
        file_unmanaged_save_data("", $custom_css_path, FILE_EXISTS_ERROR);
